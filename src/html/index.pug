//- _index.pug
//- ブログトップ、全記事一覧、タグ一覧、年別記事一覧テンプレート
extends default

block contents
  -
    const heading = page_type === 'index' ? 'post' : page_description
    const post_list =
      page_type === 'index'
        ? archives.slice(0,5) //- indexでは5件出力だけ出力する
        : page_type === 'archives'
          ? archives
          : page_type === 'tag'
            ? tags[page_title]
            : page_type === 'year'
              ? years[page_title]
              : []

  section
    .section
      h2.section__heading
        span.visuallyHidden 最新記事
        span(aria-hidden="true")= heading
      ul.postList
        each post, i in post_list
          li.postList__item(id=`post-${post.page_id}`)
            a.postList__title(href=`${archives_base}${post.page_id}.html`)= post.page_title
            .postList__time
              +timestamp(post.page_datetime)
            .postList__tag
              span.visuallyHidden この記事につけられたタグ
              +tagging(post.page_tag, post.page_type)

    if page_type === 'index'
      footer.more.space
        a(href=`${archives_base}`) 全記事一覧

  .border
  nav.section
    h2.section__heading
      span.visuallyHidden 年別記事一覧
      span(aria-hidden="true") year
    +year-list(years, archives_base)

  nav.section.space
    h2.section__heading
      span.visuallyHidden タグ別記事一覧
      span(aria-hidden="true") tag
    +tag-list(tags, archives_base)

  if page_type === 'index'

    aside.section.space
      h2.section__heading
        span.visuallyHidden 記事購読
        span(aria-hidden="true") subscribe
      +subscribe-list
