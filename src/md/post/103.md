---
layout: ./src/html/post.pug
page_type: 'post'
page_datetime: '2019-10-29T00:18:56'
page_id: '103'
page_tag: ['Netlify']
page_cover: ''
page_description: ''
page_title: 'カスタムドメインのサブドメインにNetlifyでデプロイする'
---

ヤッホー久しぶり！

もーNetlifyのなんと便利なことか。プルリクのブランチを独自サブドメインにデプロイしてくれるんで、それが最高すぎるのでみんなもNetlify使うと良い。知ってた人早く教えて欲しかった。もはや受託魔族のテストサーバーは全てNetlifyでもいいくらいだ。

今年も残すところ62日を切ってるというわけで、本ブログもスッとNetlifyデプロイに移行した。なんと9年もヘテムルのウェブサーバーにお世話になっていた。

レンタルサーバー代がね、高くもないけど安くもないから、これを浮かせて仮面ライダーのおもちゃに回したいなってね。

GitHub Pagesでもよかったのかもしれないけど、 `/docs` をコミットするのがあんまり今風じゃないように思えた。Gitで管理したいのはソースファイルであってビルドファイルじゃあない。ビルドファイルはソースファイルの写像だからいつでも復元できるんだよなぁみたいなアレがあった。そんなわけでdskdもNetlifyに移行したのだった。

----

で、表題。「カスタムドメインのサブドメインにNetlifyでデプロイする」は、例えば dskd.jp というドメインを取得していて、<em>それはそれでNetlifyのDNS設定が済んでいるものとして</em>、<strong>その上で別のリポジトリを sample.dskd.jp としてデプロイしたい場合</strong>の話だ。

結論から言うと下記の手順で秒でできる。

1. 何かのリポジトリをNetlifyでサイト登録し、メインのドメイン（e.g. dskd.jp）を設定し、DNSを設定しておく
2. サブドメインにデプロイしたいリポジトリを、Netlifyでサイトに追加する
3. そのサイトのNetlify設定画面の「Domains」メニューでサブドメインつきのアドレスを指定する（e.g sample.dskd.jp）

この流れにおいて、メインのドメインはサブドメインについては関心がない。サブドメインにリダイレクトする処理などは一切必要ない。メインのドメインにNetlifyのDNSが設定されていれば勝ったも同然となる。

NetlifyにおけるドメインのDNS設定についてはググればいくらでも出てくるので他所を参照されたし。

この手順で、先日公開した [HEX Contrast Ratio Calcurator](https://hex-crc.dskd.jp) も構築した。アドレスは hex-crc.dskd.jp なので、dskd.jp のサブドメインだ。しかし、本ブログ側には hex-crc サブドメインの設定など何も書いていない。

![メインドメインのdskd.jpのNetlifyサイトの設定の様子](/img/netlify-subdomain/dskd.png)

![さぶメインのhex-crc.dskd.jpのNetlifyサイトの設定の様子](/img/netlify-subdomain/hex-crc.png)

本当に、NetlifyのDomainsメニューでサブドメインつきのアドレスを指定しただけだ。

メインのドメインでDNS設定をしておく必要があるとはいえ、それもドメイン管理サービスにDNSアドレスを打ち込めばいいだけだし、何もかも簡単すぎる。

みんなも使うと良い。

----

今までありがとうヘテムル、これからよろしくなNetlify！