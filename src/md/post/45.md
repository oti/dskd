---
layout: ./src/html/post.pug
page_type: "post"
page_datetime: "2014-05-24T13:51:12"
page_id: "45"
page_title: "人には難しい気がする機械の真偽"
page_tag:
  - "JavaScript"
page_description: "素人なので簡単なことがわからない"
---

自分が良く書く JavaScript では、ある値があるかないかを簡素な if 文にして処理を切り分けることがある。何度もハマってしまうから記事に残しておくことにする。タイトルは覚えられていなかった言い訳。

極端にいうと、だいたいこんな感じの JavaScript となる。

<pre><code>var n = 0;

function func() {
  // hoge を huga したりする
};

if (n) {
  func(); // 実行されない
}
</code></pre>

`n`、あるじゃないか！ `n = 0`じゃないか！なんでや！って思ったけど、`else`を書いたらそっちが通ったので数値の `0` は JavaScript では偽扱いになるのだということをまた忘れていたことを嘆いた。

判定したいのは `n` が定義されているか否かであり、if 文では truthy であるか否かになっているため、認知と実装で齟齬が発生した。if 文を書き直すとこうだろうか。

<pre><code>var n = 0;

function func() {
  // hoge を huga したりする
};

if (n !== undefined) {
  func(); // 変数 n が定義されているので実行される
}
</code></pre>

`n !== undefined` として、存在確認で判定すべきだった。

明日からまたよろしくお願いいたします。
